---
title: 进程
top: false
cover: false
toc: true
mathjax: false
date: 2023-05-30 11:28:18
author: TianShan
img:
coverImg:
password:
summary:
tags:
categories:
---

# 进程间通信

## 进程间的通信方式(IPC)

每个进程各自有不同的用户地址空间，任何一个进程的全局变量在另一个进程中都看不到，所以进程之间要交换数据必须通过内核，在内核中开辟一块缓冲区，进程1把数据从用户空间拷到内核缓冲区，进程2再从内核缓冲区把数据读走，内核提供的这种机制称为进程间通信（IPC，InterProcess Communication）

## Linux IPC的主要方式
### 管道(pipe)

管道，通常指无名管道，是UNIX系统IPC最古老的形式。
管道是一种半双工（即数据只能在一个方向上流动）的通信方式，数据只能单向流动，而且只能在具有亲缘关系的进程间使用。

> 进程的亲缘关系指的是父子进程或者兄弟进程关系。

当一个管道建立时，它会创建两个文件描述符：fd[0]为读而打开，fd[1]为写而打开。


# 进程间通信的方式

## 1. 无名管道( pipe )
管道是一种半双工的通信方式，数据只能单向流动，而且只能在具有亲缘关系的进程间使用。进程的亲缘关系通常是指父子进程关系。

## 2. 高级管道(popen)
将另一个程序当做一个新的进程在当前程序进程中启动，则它算是当前程序的子进程，这种方式我们称为高级管道方式。


## 3. 有名管道 (named pipe)
 有名管道也是半双工的通信方式，但是它允许无亲缘关系进程间的通信。

## 4. 消息队列( message queue )
消息队列是由消息的链表，存放在内核中并由消息队列标识符标识。消息队列克服了信号传递信息少、管道只能承载无格式字节流以及缓冲区大小受限等缺点。

## 5. 信号量( semophore )
 信号量是一个计数器，可以用来控制多个进程对共享资源的访问。它常作为一种锁机制，防止某进程正在访问共享资源时，其他进程也访问该资源。因此，主要作为进程间以及同一进程内不同线程之间的同步手段。

## 6. 信号
 信号是一种比较复杂的通信方式，用于通知接收进程某个事件已经发生。

## 7. 共享内存( shared memory )
共享内存就是映射一段能被其他进程所访问的内存，这段共享内存由一个进程创建，但多个进程都可以访问。共享内存是最快的 IPC 方式，它是针对其他进程间通信方式运行效率低而专门设计的。它往往与其他通信机制，如信号量，配合使用，来实现进程间的同步和通信。


## 8. 套接字( socket )
套解口也是一种进程间通信机制，与其他通信机制不同的是，它可用于不同机器间的进程通信。

